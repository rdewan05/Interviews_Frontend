<title>Fetch API</title>

<body>
    <h1>Fetch API-getting JSON</h1>
    <table id='tab'>
        <thead>
            <tr id='row'>

            </tr>
        </thead>
        <tbody>

        </tbody>
    </table>
    <script>
        fetch('https://jsonplaceholder.typicode.com/users').then(function (response) {
            return response.json(); //will convert to a js object
        }).then(function (obj) {
            console.log(obj);
            const html = Object.keys(obj[0]).map((user) => {
                return `<th key=${user}>${user.toUpperCase()}</th>
                `;
            }).join("");
            document.querySelector("#row").insertAdjacentHTML("afterbegin", html);
            const html2 = obj.map((user) => {
                return `<tr key=${user.id}>
                    <td>${user.id}</td>
                    <td>${user.name}</td>
                    <td>${user.username}</td>
                    <td>${user.email}</td>
                    <td>${user.address}</td>
                    <td>${user.phone}</td>
                    <td>${user.website}</td>
                    <td>${user.company}</td>
                    
                    </tr>
                `;
            }).join("");
            document.querySelector("#tab").insertAdjacentHTML("afterbegin", html2);
            //console.log(obj);
        }).catch(function (error) {
            console.error("Something went wrong");
            console.error(error);
        })
    </script>



</body>
